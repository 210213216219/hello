<meta charset=utf-8 content="initial-scale=yes"name=viewport><script>
fetch("0-60.avif")
  .then(r => r.blob())
  .then(r => createImageBitmap(r))
  .then(r => {
  let cvs = document.createElement("canvas"),
      ctx = cvs.getContext("bitmaprenderer"),
      ec = new EditContext,
      v = visualViewport,
      vw = v.width,
      vh = v.height,
      dpr1 = devicePixelRatio,
      dpr2 = dpr1,
      vwDpr = vw * dpr1,
      vhDpr = vh * dpr2,
      isRoundUpVwDpr = !(vwDpr ^ vwDpr - .5),
      isRoundUpVhDpr = !(vhDpr ^ vhDpr - .5),
      mainCvs = new OffscreenCanvas(vwDpr += isRoundUpVwDpr, vhDpr += isRoundUpVhDpr),
      mainCtx = mainCvs.getContext("2d", {alpha: !1}),
      tierW = Math.min(vw += .5 ^ 0, 1312),
      tierH = 136 * 5,
      tierCvs = new OffscreenCanvas(tierW * (dpr1 += isRoundUpVwDpr / vw), tierH * (dpr2 += isRoundUpVhDpr / (vh += .5 ^ 0))),
      tierCtx = tierCvs.getContext("2d"),
      baseMemberCvs = new OffscreenCanvas(40800, 240),
      baseMemberCtx = baseMemberCvs.getContext("2d"),
      baseMemberBmp,
      OptMemberBmp,
      name = "#b32#c83#b91#692#1930伊藤理々杏0岩本蓮加0梅沢美波0久保史緒里0阪口珠美0佐藤楓0中村麗乃0向井葉月0山下美月0吉田綾乃0与田祐希0遠藤さくら0賀喜遥香0掛橋沙耶香0金川紗耶0北川悠理0黒見明香0佐藤璃果0柴田柚菜0清宮レイ0田村真佑0筒井あやめ0早川聖来0林瑠奈0松尾美佑0矢久保美緒0弓木奈於0五百城茉央0池田瑛紗0一ノ瀬美空0井上和0岡本姫奈0小川彩0奥田いろは0川﨑桜0菅原咲月0冨里奈央0#ecf中西アルノ0上村莉菜0小池美波0小林由依0齋藤冬優花0土生瑞穂0井上梨名0遠藤光莉0大園玲0大沼晶保0幸阪茉里乃0武元唯衣0田村保乃0藤吉夏鈴0増本綺良0松田里奈0森田ひかる0守屋麗奈0山﨑天0石森璃花0遠藤理子0小田倉麗奈0小島凪紗0谷口愛李0中嶋優月0的野美青0向井純葉0村井優0村山美羽0#9db山下瞳月0潮紗理菜0影山優佳0加藤史帆0齊藤京子0佐々木久美0佐々木美玲0高瀬愛奈0高本彩花0東村芽依0金村美玖0河田陽菜0小坂菜緒0富田鈴花0丹生明里0濱岸ひより0松田好花0上村ひなの0髙橋未来虹0森本茉莉0山口陽世0石塚瑶季0岸帆夏0小西夏菜実0清水理央0正源司陽子0竹内希来里0平尾帆夏0平岡海月0藤嶌果歩0宮地すみれ0山下葉留花0#dac渡辺莉奈0秋元真夏0安藤美雲0生田絵梨花0生駒里奈0市來玲奈0伊藤寧々0伊藤万理華0井上小百合0岩瀬佑美子0衛藤美彩0柏幸奈0川後陽菜0川村真洋0齋藤飛鳥0斎藤ちはる0斉藤優里0桜井玲香0白石麻衣0高山一実0中田花奈0中元日芽香0永島聖羅0西野七瀬0能條愛未0畠中清羅0橋本奈々未0樋口日奈0深川麻衣0星野みなみ0松村沙友理0宮澤成良0大和里菜0若月佑美0和田まあや0伊藤かりん0伊藤純奈0北野日奈子0相楽伊織0佐々木琴子0新内眞衣0鈴木絢音0寺田蘭世0西川七海0堀未央奈0矢田里沙子0山崎怜奈0米徳京花0渡辺みり愛0#8ce大園桃子0石森虹花0今泉佑唯0尾関梨香0織田奈那0佐藤詩織0志田愛佳0鈴本美愉0長沢菜々香0長濱ねる0平手友梨奈0#dbe米谷奈々未0菅井友香0原田葵0守屋茜0渡辺梨加0渡邉理佐0関有美子0松平璃子0#9df0井口眞緒0柿崎芽実0宮田愛萌0#c9d渡邉美穂".split(0),
      i = 5, j = 170 * 84,
      labelName = "SABCD".split(""),
      worker = new Worker(URL.createObjectURL(new Blob([`
      onmessage =e=> {
        let data = e.data;
      }
      `])));


    while (baseMemberCtx.drawImage(r, 0, i * 240, 6960, 240, 34800 - i * 6960, 0, 6960, 240), i--);
    baseMemberBmp = baseMemberCvs.transferToImageBitmap( );
  
    // create OptMemberBmp
    baseMemberCvs.width = dpr1 * 13600 + (4 * 171 * dpr1); // ( vwDpr / 3) * 40800
    baseMemberCvs.height = dpr2 * 93;   // (vhDpr / 3) * (240 + 36 + 3)
    baseMemberCtx.scale(dpr1, dpr2);
    mainCtx.font = baseMemberCtx.font = "12px Yu Gothic";
    baseMemberCtx.textAlign = "center";

    console.log(baseMemberCvs)

    i = 170;
    while (
      baseMemberCtx.fillText(name[i][0] < "$" ?
      (baseMemberCtx.fillStyle = name[i].slice(0, 4), name[i].slice(4)) :
      name[i], j -= 44, 92),
      baseMemberCtx.drawImage(baseMemberBmp, --i * 240, 0, 240, 240, j -= 40, 0, 80, 80),
      i);

    OptMemberBmp = baseMemberCvs.transferToImageBitmap();
    
    /*
    j = 4;
    tierCtx.scale(dpr1, dpr2);
    tierCtx.fillStyle = "#ddd";
    tierCtx.font = "700 13px meiryo";
    tierCtx.lineWidth = 32;

    while (
      tierCtx.strokeStyle = name[0].slice(i, i + 4),
      tierCtx.strokeRect(2, i *= 128, 32, 1),
      tierCtx.fillText(labelName[j], 36, i + 12),
      j--);
*/
    mainCtx.scale(dpr1, dpr2);
    mainCtx.drawImage(OptMemberBmp, 0, 0, vwDpr, OptMemberBmp.height, 0, vh - 93, vw, 93);
    mainCtx.fillStyle = "#193";
    mainCtx.fillText("岩本伊藤", 100, 100);
    //mainCtx.drawImage(OptMemberBmp, 0, 0);
    //mainCtx.drawImage(tierCvs, 0, 0, tierCvs.width, tierCvs.height, tier );


    onwheel =()=> {

    }

    ec.oncompositionstart =t=> {
    }

    ec.oncompositionend =t=> {
    }

    ec.ontextformatupdate =()=> {
    }

    ec.ontextupdate =t=> {
    }

    ctx.transferFromImageBitmap(mainCvs.transferToImageBitmap());
    cvs.setAttribute("style", "width:100%;height:100%;outline:0;touch-action:none");
    cvs.appendChild(document.createElement("title")).append("tiermaker46");
    document.lastChild.replaceWith(cvs);


})
/*
onclick =e=> w.postMessage([e.x, e.y, 64]);
onresize =e=> w.postMessage([visualViewport.width, visualViewport.height, devicePixelRatio]);
onmousemove =e=> w.postMessage([]);
onpointerdown =e=> w.postMessage([]);
onpointerup =e=> w.postMessage([]);
*/
</script>
